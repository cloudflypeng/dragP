(function(n,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(n=typeof globalThis<"u"?globalThis:n||self,o(n["drag-p"]={}))})(this,function(n){"use strict";let o=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,l)=>(l&=63,l<36?e+=l.toString(36):l<62?e+=(l-26).toString(36).toUpperCase():l>62?e+="-":e+="_",e),"");n.cloneDom=null;let r=null,m=[],f=[],s=t=>{t.preventDefault()};const u=t=>{n.cloneDom.style.position="absolute",n.cloneDom.style.top="-100vh",n.cloneDom.style.left="-100vw",n.cloneDom.style.zIndex="2147483647",n.cloneDom.style.pointerEvents="none",n.cloneDom.id=o(),r=n.cloneDom.id,t.target.parentNode.appendChild(n.cloneDom)},g=()=>{let t=document.getElementById(r);t==null||t.remove()};let D=t=>{t.target.removeEventListener("dragend",D),m.forEach(e=>{e.removeEventListener("dragover",s),e.classList.remove(`${r}-active`)}),f.forEach(e=>{e.remove()}),m=[],f=[],g(),n.cloneDom=null,r=null},E=t=>{let e=t.clonedStyle||{};i(e)||Object.keys(e).forEach(a=>{n.cloneDom.style[a]=e[a]});let l=t.targetStyle||{};if(!i(l)){let a=document.createElement("style");a.type="text/css";let c="";Object.keys(l).forEach(d=>{c+=`${T(d)}:${l[d]};`}),a.innerHTML=`.${r}-active {${c}} `,document.head.appendChild(a),f.push(a)}},L=(t=[])=>{t.forEach(e=>{(v(e)?[e]:document.querySelectorAll(e)||[]).forEach(a=>{a.classList.add(`${r}-active`),a.addEventListener("dragover",s),m.push(a)})})};const S=(t,e)=>(l,...a)=>{var h;let c=l.target,d=(h=e.customDragDom)==null?void 0:h.call(e,l,...a);n.cloneDom=v(d)?d:c.cloneNode(!0),u(l),i(e)||E(e);let y=(e==null?void 0:e.offset)||{x:0,y:0};l.dataTransfer.setDragImage(n.cloneDom,y.x,y.y),c.addEventListener("dragend",D),l.remember=N=>{l.dataTransfer.setData("text/plain",JSON.stringify(N))},l.activeTarget=L,t(l,...a)};function v(t){return t instanceof HTMLElement}function i(t){return t?Object.keys(t).length===0:!0}let T=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();n.addDragNode=u,n.dragP=S,n.removeDragNode=g,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
