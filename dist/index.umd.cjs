(function(a,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(a=typeof globalThis<"u"?globalThis:a||self,s(a["drag-p"]={}))})(this,function(a){"use strict";let s=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function m(t){return t instanceof HTMLElement}function f(t){return t?Object.keys(t).length===0:!0}let S=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase(),L=t=>{let e="";return Object.keys(t).forEach(r=>{e+=`${S(r)}:${t[r]};`}),e},T=(t,e)=>{!t||!e||Object.keys(e).forEach(r=>{t.style[r]=e[r]})},N=(t,e)=>{let r=document.createElement("style");r.type="text/css";let n=L(e);return r.innerHTML=`.${t} {${n}} `,document.head.appendChild(r),r};const O={position:"absolute",top:"-100vh",left:"-100vw",zIndex:2147483647,pointerEvents:"none"},$={x:0,y:0};let l=null,o=null,i=[],u=[],c=null,v=t=>{t.preventDefault()};const D=t=>{T(l,O),l.id=s(),o=l.id,t.target.parentNode.appendChild(l)},E=()=>{let t=document.getElementById(o);t==null||t.remove()};let h=t=>{t.target.removeEventListener("dragend",h),i.forEach(e=>{e.removeEventListener("dragover",v),e.classList.remove(`${o}-active`)}),u.forEach(e=>{e.remove()}),c==null||c(),c=null,i=[],u=[],E(),l=null,o=null},A=t=>{const{clonedStyle:e,targetStyle:r,clonedClass:n,targetClass:g}=t;if(n&&l.classList.add(n),f(e)||Object.keys(e).forEach(d=>{l.style[d]=e[d]}),!f(r)){let d=N(`${o}-active`,r);document.head.appendChild(d),u.push(d)}},C=(t=[])=>{t.forEach(e=>{(m(e)?[e]:document.querySelectorAll(e)||[]).forEach(n=>{n.classList.add(`${o}-active`),n.addEventListener("dragover",v),i.push(n)})})};const I=(t,e)=>(r,...n)=>{var p;let g=r.target,d=(p=e.customDragDom)==null?void 0:p.call(e,r,...n);l=m(d)?d:g.cloneNode(!0),D(r),f(e)||A(e);let y=(e==null?void 0:e.offset)||$;r.dataTransfer.setDragImage(l,y.x,y.y),g.addEventListener("dragend",h),r.remember=_=>{r.dataTransfer.setData("text/plain",JSON.stringify(_))},r.activeTarget=C,t(r,...n)};a.addDragNode=D,a.dragP=I,a.removeDragNode=E,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
