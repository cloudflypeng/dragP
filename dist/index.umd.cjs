(function(n,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n["drag-p"]={}))})(this,function(n){"use strict";let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,o)=>(o&=63,o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o>62?t+="-":t+="_",t),"");n.cloneDom=null;let a=null,i=[],s=e=>{e.preventDefault()},m=[];const f=()=>{n.cloneDom.style.position="absolute",n.cloneDom.style.top="-100vh",n.cloneDom.style.left="-100vw",n.cloneDom.style.pointerEvents="none",n.cloneDom.id=r(),a=n.cloneDom.id,document.body.appendChild(n.cloneDom)},u=()=>{let e=document.getElementById(a);e==null||e.remove()};let g=e=>{e.target.removeEventListener("dragend",g),i.forEach(t=>{t.removeEventListener("dragover",s),t.classList.remove(`${a}-active`)}),m.forEach(t=>{t.remove()}),u(),n.cloneDom=null,a=null},v=e=>{let t=e.clonedStyle||{};c(t)||Object.keys(t).forEach(l=>{n.cloneDom.style[l]=t[l]});let o=e.targetStyle||{};if(!c(o)){let l=document.createElement("style");l.type="text/css";let d="";Object.keys(o).forEach(D=>{d+=`${L(D)}:${o[D]};`}),l.innerHTML=`.${a}-active {${d}} `,document.head.appendChild(l),m.push(l)}},y=(e=[])=>{e.forEach(t=>{(E(t)?[t]:document.querySelectorAll(t)||[]).forEach(l=>{l.classList.add(`${a}-active`),l.addEventListener("dragover",s),i.push(l)})})};const h=(e,t)=>o=>{let l=o.target;n.cloneDom=l.cloneNode(!0),f(),c(t)||v(t),o.dataTransfer.setDragImage(n.cloneDom,0,0),l.addEventListener("dragend",g),o.remember=d=>{o.dataTransfer.setData("text/plain",JSON.stringify(d))},o.activeTarget=y,e(o)};function E(e){return e instanceof HTMLElement}function c(e){return Object.keys(e).length===0}let L=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase();n.addDragNode=f,n.dragP=h,n.removeDragNode=u,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
